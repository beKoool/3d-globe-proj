<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glowing Globe</title>
    <link rel='stylesheet' href='https://unpkg.com/maplibre-gl@5.13.0/dist/maplibre-gl.css' />
    <script src='https://unpkg.com/maplibre-gl@5.13.0/dist/maplibre-gl.js'></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #000;
            overflow: hidden;
        }

        #space-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background: radial-gradient(ellipse at center, #0f122e 0%, rgb(0, 0, 0) 100%);
        }

        .stars,
        .stars2,
        .stars3 {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: transparent;
        }

        .stars {
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 40px 70px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 90px 40px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 160px 120px, #ddd, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 200px 50px, #eee, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 300px 90px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 50px 150px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 250px 180px, #ddd, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 120px 200px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 180px 60px, #eee, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 280px 130px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 60px 90px, #ddd, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 330px 170px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 140px 30px, #eee, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 220px 240px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 310px 160px, #ddd, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 100px 210px, #eee, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 270px 100px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 190px 140px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 340px 220px, #ddd, rgba(0, 0, 0, 0));
            background-repeat: repeat;
            background-size: 200px 200px;
            width: 400%;
            height: 400%;
            left: -150%;
            top: -150%;
            transition: transform 0.1s ease-out;
        }

        .stars2 {
            background-image: 
                radial-gradient(1px 1px at 50px 100px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 150px 60px, #eee, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 250px 140px, #ddd, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 100px 200px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 320px 80px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 80px 180px, #eee, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 200px 120px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 300px 220px, #ddd, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 30px 40px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 180px 160px, #eee, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 270px 70px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 130px 250px, #ddd, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 210px 110px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 340px 190px, #eee, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 110px 50px, #ddd, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 240px 280px, #fff, rgba(0, 0, 0, 0));
            background-repeat: repeat;
            background-size: 250px 250px;
            width: 400%;
            height: 400%;
            left: -150%;
            top: -150%;
            opacity: 0.7;
            transition: transform 0.15s ease-out;
        }

        .stars3 {
            background-image: 
                radial-gradient(1px 1px at 75px 125px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 175px 80px, #eee, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 275px 175px, #ddd, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 125px 220px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 225px 50px, #eee, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 25px 90px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 325px 140px, #ddd, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 150px 280px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 350px 200px, #eee, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 100px 30px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 250px 260px, #ddd, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 380px 110px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(2px 2px at 50px 190px, #eee, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 200px 150px, #fff, rgba(0, 0, 0, 0)),
                radial-gradient(1px 1px at 300px 300px, #ddd, rgba(0, 0, 0, 0));
            background-repeat: repeat;
            background-size: 300px 300px;
            width: 400%;
            height: 400%;
            left: -150%;
            top: -150%;
            opacity: 0.5;
            transition: transform 0.2s ease-out;
        }

        #map {
            width: 100vw;
            height: 100vh;
            position: relative;
            z-index: 1;
            background: transparent !important;
        }

        .header-container {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.733);
            padding: 20px 28px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(100, 180, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            z-index: 100;
            max-width: 400px;
        }

        .header-title {
            font-size: 28px;
            font-weight: 700;
            margin: 0 0 6px 0;
            background: linear-gradient(135deg, #FF6B35, #F7931E, #FFC837);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            line-height: 1.2;
        }

        .header-subtitle {
            font-size: 14px;
            color: #333;
            margin: 0;
            font-weight: 500;
            opacity: 0.85;
        }

        .maplibregl-map {
            background: transparent !important;
        }

        .maplibregl-canvas-container {
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.9)) drop-shadow(0 0 10px rgba(200, 220, 255, 0.7)) drop-shadow(0 0 15px rgba(100, 180, 255, 0.5)) drop-shadow(0 0 30px rgba(80, 160, 255, 0.3));
        }

        #map::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 700px;
            height: 700px;
            border-radius: 50%;
            pointer-events: none;
            z-index: 0;
        }

        .marker {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #6af, #38f, #06c);
            border: 2px solid rgba(255, 255, 255, 0.9);
            cursor: pointer;
            box-shadow: 0 0 15px rgba(100, 180, 255, 1), 0 0 25px rgba(100, 180, 255, 0.7), 0 0 35px rgba(100, 180, 255, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
            animation: markerPulse 2s ease-in-out infinite;
        }

        @keyframes markerPulse {

            0%,
            100% {
                box-shadow: 0 0 15px rgba(100, 180, 255, 1), 0 0 25px rgba(100, 180, 255, 0.7), 0 0 35px rgba(100, 180, 255, 0.5), inset 0 0 10px rgba(255, 255, 255, 0.3);
            }

            50% {
                box-shadow: 0 0 20px rgba(100, 180, 255, 1), 0 0 35px rgba(100, 180, 255, 0.9), 0 0 50px rgba(100, 180, 255, 0.7), inset 0 0 15px rgba(255, 255, 255, 0.5);
            }
        }

        .marker:hover {
            transform: scale(1.6);
            box-shadow: 0 0 25px rgb(120, 200, 255), 0 0 45px rgba(100, 180, 255, 0.9), 0 0 65px rgba(100, 180, 255, 0.7), inset 0 0 20px rgba(255, 255, 255, 0.6);
        }

        .maplibregl-popup-content {
            background: rgba(5, 10, 25, 0.95);
            color: #fff;
            padding: 0;
            border-radius: 12px;
            border: 1px solid rgba(100, 180, 255, 0.6);
            box-shadow: 0 0 30px rgba(100, 180, 255, 0.4), 0 5px 25px rgba(0, 0, 0, 0.6), inset 0 0 20px rgba(100, 180, 255, 0.1);
            font-size: 14px;
            backdrop-filter: blur(15px);
            font-family: 'Inter', sans-serif;
            min-width: 280px;
        }

        .popup-header {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 18px;
            border-bottom: 1px solid rgba(100, 180, 255, 0.3);
        }

        .popup-logo {
            width: 32px;
            height: 32px;
            object-fit: contain;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.1);
            padding: 4px;
        }

        .popup-title {
            flex: 1;
        }

        .popup-name {
            font-size: 16px;
            font-weight: 600;
            color: #fff;
            margin: 0 0 4px 0;
        }

        .popup-location {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            margin: 0;
        }

        .popup-body {
            padding: 16px 18px;
        }

        .popup-description {
            font-size: 13px;
            color: rgba(255, 255, 255, 0.85);
            margin: 0 0 12px 0;
        }

        .popup-link {
            display: inline-block;
            color: #6af;
            text-decoration: none;
            font-size: 13px;
            padding: 6px 12px;
            border: 1px solid rgba(100, 180, 255, 0.4);
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .popup-link:hover {
            background: rgba(100, 180, 255, 0.2);
            border-color: rgba(100, 180, 255, 0.6);
            box-shadow: 0 0 10px rgba(100, 180, 255, 0.3);
        }

        .maplibregl-popup-tip {
            border-top-color: rgba(5, 10, 25, 0.95);
        }

        .maplibregl-popup-close-button {
            color: #fff;
            font-size: 22px;
            padding: 5px 10px;
            opacity: 0.8;
            transition: all 0.3s ease;
        }

        .maplibregl-popup-close-button:hover {
            color: #6af;
            opacity: 1;
            background: transparent;
        }

        .maplibregl-ctrl button {
            background: rgba(10, 20, 40, 0.85);
            border: 1px solid rgba(100, 180, 255, 0.4);
            transition: all 0.3s ease;
        }

        .maplibregl-ctrl button:hover {
            background: rgba(20, 40, 70, 0.95);
            box-shadow: 0 0 15px rgba(100, 180, 255, 0.4);
            border-color: rgba(100, 180, 255, 0.6);
        }

        .maplibregl-ctrl-group {
            background: rgba(10, 20, 40, 0.85);
            box-shadow: 0 0 20px rgba(100, 180, 255, 0.2);
        }
    </style>
</head>

<body>
    <div id="space-bg">
        <div class="stars"></div>
        <div class="stars2"></div>
        <div class="stars3"></div>
    </div>

    <div id="map">
        <div class="header-container">
            <h1 class="header-title">Tinkune.com Map</h1>
            <p class="header-subtitle">Find Nepali businesses all over the world</p>
        </div>
    </div>

    <script>
        const locations = [
            {
                coords: [-77.0353, 38.8895],
                name: "Washington Monument",
                location: "Washington D.C., USA",
                description: "Built in 1848",
                website: "https://www.nps.gov/wamo/index.htm",
                logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a4/Flag_of_the_United_States.svg/32px-Flag_of_the_United_States.svg.png"
            },
            {
                coords: [2.2945, 48.8584],
                name: "Eiffel Tower",
                location: "Paris, France",
                description: "Built in 1889",
                website: "https://www.toureiffel.paris/en",
                logo: "https://upload.wikimedia.org/wikipedia/en/thumb/c/c3/Flag_of_France.svg/32px-Flag_of_France.svg.png"
            },
            {
                coords: [139.6917, 35.6895],
                name: "Tokyo Tower",
                location: "Tokyo, Japan",
                description: "Capital of Japan",
                website: "https://www.tokyotower.co.jp/en.html",
                logo: "https://upload.wikimedia.org/wikipedia/en/thumb/9/9e/Flag_of_Japan.svg/32px-Flag_of_Japan.svg.png"
            },
            {
                coords: [151.2153, -33.8568],
                name: "Sydney Opera House",
                location: "Sydney, Australia",
                description: "Opened in 1973",
                website: "https://www.sydneyoperahouse.com",
                logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/Flag_of_Australia_%28converted%29.svg/32px-Flag_of_Australia_%28converted%29.svg.png"
            },
            {
                coords: [85.3240, 27.7172],
                name: "Kathmandu Valley",
                location: "Kathmandu, Nepal",
                description: "Capital of Nepal",
                website: "https://welcomenepal.com",
                logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/Flag_of_Nepal.svg/26px-Flag_of_Nepal.svg.png"
            }
        ];

        const map = new maplibregl.Map({
            container: 'map',
            zoom: 1.5,
            center: [85.3240, 27.7172],
            style: 'https://demotiles.maplibre.org/style.json',
            projection: 'globe',
            renderWorldCopies: false
        });

        map.on('style.load', () => {
            map.setProjection({
                type: 'globe',
            });
        });

        let userInteracting = false;
        let lastInteractionTime = 0;
        let popupOpen = false;
        let prevCenter = { lng: 85.3240, lat: 27.7172 };
        let starsOffset = { x: 0, y: 0 };

        const starsLayer1 = document.querySelector('.stars');
        const starsLayer2 = document.querySelector('.stars2');
        const starsLayer3 = document.querySelector('.stars3');

        function updateStarsPosition() {
            const currentCenter = map.getCenter();
            const lngDelta = currentCenter.lng - prevCenter.lng;
            const latDelta = currentCenter.lat - prevCenter.lat;

            // Move stars in opposite direction of globe rotation for parallax effect
            starsOffset.x -= lngDelta * 3;
            starsOffset.y -= latDelta * 3;

            // Use modulo to create infinite repeating effect
            const layer1X = starsOffset.x * 0.3;
            const layer1Y = starsOffset.y * 0.3;
            const layer2X = starsOffset.x * 0.5;
            const layer2Y = starsOffset.y * 0.5;
            const layer3X = starsOffset.x * 0.7;
            const layer3Y = starsOffset.y * 0.7;

            starsLayer1.style.transform = `translate(${layer1X}px, ${layer1Y}px)`;
            starsLayer2.style.transform = `translate(${layer2X}px, ${layer2Y}px)`;
            starsLayer3.style.transform = `translate(${layer3X}px, ${layer3Y}px)`;

            prevCenter = { lng: currentCenter.lng, lat: currentCenter.lat };
        }

        function rotateGlobe() {
            const now = Date.now();

            if (!userInteracting && !popupOpen && now - lastInteractionTime > 150) {
                const speed = -0.015;
                const c = map.getCenter();
                map.setCenter([c.lng + speed, c.lat]);
            }

            requestAnimationFrame(rotateGlobe);
        }

        function stopRotationTemporarily() {
            userInteracting = true;
            lastInteractionTime = Date.now();
        }

        function resumeRotationSoon() {
            userInteracting = false;
            lastInteractionTime = Date.now();
        }

        map.on("move", updateStarsPosition);
        map.on("mousedown", stopRotationTemporarily);
        map.on("mouseup", resumeRotationSoon);
        map.on("dragstart", stopRotationTemporarily);
        map.on("dragend", resumeRotationSoon);
        map.on("zoomstart", stopRotationTemporarily);
        map.on("zoomend", resumeRotationSoon);
        map.on("pitchstart", stopRotationTemporarily);
        map.on("pitchend", resumeRotationSoon);
        map.on("touchstart", stopRotationTemporarily);
        map.on("touchend", resumeRotationSoon);

        map.on("load", () => {
            rotateGlobe();
        });

        locations.forEach(loc => {
            const popupHTML = `
                <div class="popup-header">
                    <img src="${loc.logo}" alt="${loc.name}" class="popup-logo" />
                    <div class="popup-title">
                        <h3 class="popup-name">${loc.name}</h3>
                        <p class="popup-location">${loc.location}</p>
                    </div>
                </div>
                <div class="popup-body">
                    <p class="popup-description">${loc.description}</p>
                    <a href="${loc.website}" target="_blank" class="popup-link">Visit Website â†’</a>
                </div>
            `;

            const popup = new maplibregl.Popup({
                offset: 25,
                maxWidth: '320px'
            }).setHTML(popupHTML);

            popup.on('open', () => {
                popupOpen = true;
                stopRotationTemporarily();
            });

            popup.on('close', () => {
                popupOpen = false;
                resumeRotationSoon();
            });

            const el = document.createElement('div');
            el.className = 'marker';

            new maplibregl.Marker({ element: el })
                .setLngLat(loc.coords)
                .setPopup(popup)
                .addTo(map);
        });
    </script>
</body>

</html>